<!-- 
Copyright 2023 CÃ©dric Stark. All Rights Reserved.
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at
    http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.

NOTICE
Parts of this file have been modified from its original Google implementation found under
https://github.com/tensorflow/tfjs-models/tree/master/hand-pose-detection.  

Copyright 2021 Google LLC. All Rights Reserved.
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at
    http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
==============================================================================-->
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1,maximum-scale=1.0, user-scalable=no"
    />
    <meta name="author" content="CÃ©dric Stark" />
    <meta name="description" content="Simple app to draw using your webcam" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
      crossorigin="anonymous"
    />
    <link
      rel="icon"
      type="image/png"
      href="img/favicon-32x32.png"
      sizes="32x32"
    />
    <link
      rel="icon"
      type="image/png"
      href="img/favicon-16x16.png"
      sizes="16x16"
    />
    <link rel="stylesheet" href="styles.css" />
    <title>Drawmatic</title>
  </head>
  <body class="background">
    <!-- Navigation -->
    <nav class="navbar sticky-top navbar-dark bg-primary">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">
          <img
            src="img/favicon-32x32.png"
            width="30"
            height="30"
            class="d-inline-block align-top"
            alt=""
          />
          Drawmatic
        </a>
        <div class="navbar-nav">
          <a class="nav-link active" aria-current="page" href="about.html"
            >About</a
          >
        </div>
      </div>
    </nav>

    <!-- Actual content -->
    <div class="container-fluid">
      <div class="row">
        <div class="col">
          <div class="d-flex justify-content-center">
            <div class="media-column">
              <div class="row">
                <div class="col mt-3 border rounded white">
                  <!-- TODO: show loading animation as default -->
                  <!-- Camera feed + canvas -->
                  <div class="container mt-3">
                    <h4>Drawing board</h4>

                    <hr />
                    <div class="canvas-wrapper mt-3">
                      <div
                        class="d-flex justify-content-center"
                        id="placeholder"
                      >
                        <div class="spinner-border" role="status">
                          <span class="visually-hidden">Loading...</span>
                        </div>
                      </div>
                      <canvas centered id="output"></canvas>
                      <video
                        id="video"
                        playsinline
                        style="
                          -webkit-transform: scaleX(-1);
                          transform: scaleX(-1);
                          visibility: hidden;
                          width: auto;
                          height: auto;
                        "
                      ></video>
                    </div>

                    <!-- Buttons to snap screenshot and reset drawing -->
                    <div class="d-flex justify-content-between mt-3">
                      <button
                        id="snap"
                        class="btn btn-lg btn-success"
                        style="width: 45%"
                      >
                        Snap!
                      </button>
                      <button
                        id="reset"
                        class="btn btn-lg btn-danger"
                        style="width: 45%"
                      >
                        Reset
                      </button>
                    </div>

                    <!-- User guide -->
                    <button
                      class="btn btn-lg btn-outline-primary mt-3 mb-3"
                      type="button"
                      style="width: 100%"
                      data-bs-toggle="collapse"
                      data-bs-target="#userguide"
                      aria-expanded="false"
                      aria-controls="userguide"
                    >
                      How to use?
                    </button>
                    <div class="collapse mb-3" id="userguide">
                      <div class="card card-body">
                        <h5 class="card-title">How to use</h5>
                        <p>
                          Make sure your camera is turned on (and give the
                          permission to use it).
                        </p>
                        <p>
                          Bring one hand into the frame, you should see a circle
                          around your index finger. Pinch index finger and thumb
                          together ðŸ‘Œ to start drawing (the circle will fill).
                        </p>
                        <p>
                          Click on "Snap!" to snap a picture, or use "Reset" to
                          delete your drawing and start over.
                        </p>
                        Enjoy!
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col">
          <div class="d-flex justify-content-center">
            <div class="media-column">
              <div class="row">
                <div class="col mt-3 border rounded white">
                  <!-- Gallery containing snapshots -->
                  <div class="container mt-3">
                    <h4>Gallery</h4>
                    <hr />
                    <div centered id="gallery" class="mt-3"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
    crossorigin="anonymous"
  ></script>
  <script src="src/index.js"></script>
</html>
